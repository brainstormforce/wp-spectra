import React, { useState, useEffect } from 'react';
import ExtendWebsiteItem from './ExtendWebsiteItem';
import { Container, Skeleton } from '@bsf/force-ui';
import { __ } from '@wordpress/i18n';

const ExtendYourWebsite = () => {
	const [ plugins, setPlugins ] = useState( [] );

	useEffect( () => {
		const pluginsData = convertToPluginsArray( uagb_plugins_data );
		setPlugins( pluginsData );
	}, [ uagb_plugins_data ] );

	const iconMapping = {
		'astra': () => (
			<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					fillRule="evenodd"
					clipRule="evenodd"
					d="M10 20C15.5229 20 20 15.5228 20 10C20 4.47715 15.5229 0 10 0C4.47716 0 0 4.47715 0 10C0 15.5228 4.47716 20 10 20ZM9.87902 4.43553C9.03231 6.22172 8.18559 8.00991 7.33888 9.79805C6.49206 11.5865 5.64519 13.3749 4.79838 15.1613H6.97578C7.6613 13.7783 8.34678 12.3932 9.03225 11.0081C9.71773 9.62302 10.4032 8.23794 11.0887 6.85487L9.87902 4.43553ZM11.0887 11.0483C11.4374 10.3225 11.7862 9.59679 12.137 8.87103C12.649 9.91933 13.1591 10.9677 13.6691 12.016C14.1793 13.0644 14.6894 14.1129 15.2015 15.1613H12.8628C12.7298 14.8509 12.5946 14.5424 12.4596 14.2339C12.3245 13.9255 12.1894 13.617 12.0563 13.3065H10.0402H9.99989L10.0402 13.2258C10.3911 12.5 10.7399 11.7742 11.0887 11.0483Z"
					fill="url(#paint0_linear_10359_7598)"
				/>
				<defs>
					<linearGradient
						id="paint0_linear_10359_7598"
						x1="20"
						y1="-5.96046e-07"
						x2="-1.78814e-06"
						y2="20"
						gradientUnits="userSpaceOnUse"
					>
						<stop stopColor="#B147E1" />
						<stop offset="1" stopColor="#5236DD" />
					</linearGradient>
				</defs>
			</svg>
		),
		'astra-sites/astra-sites.php': () => (
			<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<g clipPath="url(#clip0_10359_7622)">
					<path
						fillRule="evenodd"
						clipRule="evenodd"
						d="M15.9016 1.63934H4.09835C2.74029 1.63934 1.63934 2.74029 1.63934 4.09835V15.9016C1.63934 17.2597 2.74029 18.3606 4.09835 18.3606H15.9016C17.2597 18.3606 18.3606 17.2597 18.3606 15.9016V4.09835C18.3606 2.74029 17.2597 1.63934 15.9016 1.63934ZM4.09835 0C1.8349 0 0 1.8349 0 4.09835V15.9016C0 18.1651 1.8349 20 4.09835 20H15.9016C18.1651 20 20 18.1651 20 15.9016V4.09835C20 1.8349 18.1651 0 15.9016 0H4.09835Z"
						fill="url(#paint0_linear_10359_7622)"
					/>
					<path
						fillRule="evenodd"
						clipRule="evenodd"
						d="M12.0852 6.29242C12.0468 6.25805 12.0063 6.22515 11.9636 6.19371C11.5934 5.92119 11.0911 5.78492 10.4565 5.78492C10.0253 5.78492 9.66127 5.84594 9.36433 5.96796C9.06739 6.08592 8.8396 6.25067 8.68097 6.46219C8.51056 6.69538 8.22035 6.88436 7.96939 6.7414C7.77241 6.62917 7.59052 6.49073 7.42895 6.32919C7.12762 6.02786 6.90668 5.65576 6.78637 5.24694C6.73335 5.06684 6.78027 4.86998 6.92208 4.74694C7.2392 4.47176 7.60991 4.24013 8.0342 4.05209C8.75012 3.73482 9.56364 3.57617 10.4748 3.57617C11.4022 3.57617 12.2117 3.73482 12.9032 4.05209C13.5988 4.36938 14.1398 4.81071 14.5262 5.37613C14.6676 5.58294 14.7839 5.80176 14.8752 6.03253C15.1458 6.71688 14.5211 7.3408 13.7851 7.3408C13.2106 7.3408 12.7507 6.91113 12.3163 6.50521C12.2386 6.43265 12.1618 6.36086 12.0852 6.29242ZM8.30266 7.64605C8.41172 7.6034 8.52849 7.66794 8.58945 7.7679C8.6952 7.93467 8.8396 8.07909 9.02264 8.20111C9.2057 8.31907 9.41722 8.4228 9.6572 8.5123C9.8972 8.59771 10.1535 8.67092 10.426 8.73194L11.5487 9.0004C12.0937 9.12244 12.5941 9.28515 13.0496 9.48853C13.5052 9.69192 13.8998 9.94207 14.2333 10.239C14.5669 10.5359 14.8252 10.8858 15.0082 11.2885C15.1953 11.6912 15.2909 12.1529 15.295 12.6735C15.2909 13.4382 15.0957 14.1013 14.7092 14.6626C14.3269 15.2199 13.7737 15.6531 13.0496 15.9622C12.3297 16.2673 11.4612 16.4198 10.4443 16.4198C9.43552 16.4198 8.55691 16.2653 7.80845 15.9561C7.06408 15.647 6.48239 15.1894 6.06343 14.5833C5.87006 14.2989 5.71956 13.9832 5.61189 13.6361C5.39472 12.9361 6.01368 12.3196 6.74664 12.3196H6.84168C7.4752 12.3196 7.94579 12.8632 8.32708 13.3691C8.54266 13.6457 8.82943 13.8552 9.18739 13.9975C9.54941 14.1358 9.95822 14.205 10.4138 14.205C10.8612 14.205 11.2497 14.1399 11.5792 14.0097C11.9127 13.8796 12.171 13.6986 12.3541 13.4667C12.5371 13.2349 12.6286 12.9684 12.6286 12.6674C12.6286 12.3867 12.5452 12.1508 12.3785 11.9596C12.2158 11.7685 11.9758 11.6058 11.6585 11.4715C11.3453 11.3373 10.9609 11.2153 10.5053 11.1054L9.14468 10.7637C8.25214 10.5466 7.5187 10.2259 6.94439 9.80148C6.78914 9.68676 6.73185 9.4848 6.78637 9.29961C6.90664 8.89084 7.12756 8.51875 7.42885 8.21742C7.6781 7.96813 7.97581 7.77386 8.30266 7.64605ZM6.68587 5.92236L6.56629 5.51609C6.56114 5.49844 6.55041 5.48294 6.53572 5.47192C6.52102 5.4609 6.50314 5.45494 6.48477 5.45494C6.46639 5.45494 6.44852 5.4609 6.43381 5.47192C6.4191 5.48294 6.40837 5.49844 6.40322 5.51609L6.28383 5.92236C6.2036 6.19486 6.05629 6.4429 5.85539 6.64375C5.65452 6.84461 5.40645 6.99186 5.13391 7.07207L4.72762 7.19163C4.64627 7.21575 4.64627 7.3309 4.72762 7.35469L5.13391 7.47426C5.40641 7.55446 5.65443 7.70176 5.85531 7.90261C6.05616 8.10344 6.20343 8.35146 6.28366 8.62396L6.40322 9.0304C6.42718 9.11159 6.54235 9.11159 6.56629 9.0304L6.68587 8.62413C6.76606 8.35161 6.91333 8.10355 7.1142 7.90267C7.31506 7.7018 7.5631 7.55448 7.83562 7.47426L8.24208 7.35469C8.32327 7.33073 8.32327 7.21559 8.24208 7.1918L7.83579 7.07223C7.56322 6.99203 7.31516 6.84473 7.11427 6.64384C6.91337 6.44296 6.76608 6.1949 6.68587 5.92236ZM5.23652 8.32203L5.27239 8.4439C5.29645 8.52567 5.34064 8.60009 5.40091 8.66036C5.46116 8.72061 5.5356 8.7648 5.61735 8.78886L5.73924 8.82473C5.7636 8.83188 5.7636 8.86642 5.73924 8.87361L5.61731 8.90948C5.53556 8.93355 5.46114 8.97773 5.40087 9.03801C5.34062 9.09828 5.29643 9.17269 5.27239 9.25444L5.23652 9.37632C5.22933 9.40067 5.19479 9.40067 5.1876 9.37632L5.15172 9.25438C5.12766 9.17265 5.08347 9.09823 5.0232 9.03798C4.96295 8.97771 4.88854 8.93355 4.80679 8.90948L4.68491 8.87361C4.66049 8.86646 4.66049 8.83192 4.68491 8.82469L4.80679 8.78882C4.88856 8.76475 4.96297 8.72059 5.02324 8.66032C5.08352 8.60007 5.1277 8.52565 5.15177 8.4439L5.1876 8.32203C5.18914 8.31673 5.19235 8.31209 5.19677 8.30878C5.20118 8.30546 5.20654 8.30367 5.21206 8.30367C5.21756 8.30367 5.22293 8.30546 5.22733 8.30878C5.23174 8.31209 5.23497 8.31673 5.23652 8.32203ZM5.00287 5.00621L4.94708 4.81663C4.94466 4.8084 4.93966 4.80117 4.93281 4.79603C4.92593 4.79088 4.9176 4.78809 4.90902 4.78809C4.90045 4.78809 4.8921 4.79088 4.88525 4.79603C4.87839 4.80117 4.87337 4.8084 4.87097 4.81663L4.81524 5.00621C4.77781 5.1334 4.70908 5.24913 4.61533 5.34288C4.52158 5.43661 4.40581 5.50532 4.27862 5.54276L4.08902 5.59855C4.05106 5.6098 4.05106 5.66355 4.08902 5.67465L4.27862 5.73044C4.40579 5.76788 4.52154 5.83661 4.61527 5.93034C4.70902 6.02407 4.77775 6.13982 4.81518 6.26696L4.87097 6.45665C4.88216 6.49453 4.93589 6.49453 4.94708 6.45665L5.00287 6.26705C5.04029 6.13988 5.10902 6.02411 5.20277 5.93036C5.29649 5.83663 5.41224 5.76788 5.53941 5.73044L5.7291 5.67465C5.76699 5.66346 5.76699 5.60973 5.7291 5.59863L5.53949 5.54282C5.41231 5.5054 5.29654 5.43667 5.20279 5.34292C5.10904 5.24917 5.04031 5.1334 5.00287 5.00621Z"
						fill="url(#paint1_linear_10359_7622)"
					/>
				</g>
				<defs>
					<linearGradient
						id="paint0_linear_10359_7622"
						x1="1.30248"
						y1="19.7653"
						x2="7.81504"
						y2="-2.89315"
						gradientUnits="userSpaceOnUse"
					>
						<stop stopColor="#C639FF" />
						<stop offset="1" stopColor="#3662FF" />
					</linearGradient>
					<linearGradient
						id="paint1_linear_10359_7622"
						x1="4.79218"
						y1="16.2691"
						x2="9.46406"
						y2="2.05132"
						gradientUnits="userSpaceOnUse"
					>
						<stop stopColor="#C639FF" />
						<stop offset="1" stopColor="#3662FF" />
					</linearGradient>
					<clipPath id="clip0_10359_7622">
						<rect width="20" height="20" fill="white" />
					</clipPath>
				</defs>
			</svg>
		),
		'surecart/surecart.php': () => (
			<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path
					fillRule="evenodd"
					clipRule="evenodd"
					d="M10 20C15.5229 20 20 15.5228 20 9.99995C20 4.47713 15.5229 0 10 0C4.47716 0 0 4.47713 0 9.99995C0 15.5228 4.47716 20 10 20ZM10.0431 4.99997C9.24015 4.99997 8.12895 5.45918 7.56117 6.02561L6.01908 7.56407H13.7054L16.2755 4.99997H10.0431ZM12.4259 13.9743C11.8582 14.5407 10.747 14.9999 9.94401 14.9999H3.71157L6.2817 12.4358H13.968L12.4259 13.9743ZM14.9241 8.84611H4.73681L4.2556 9.32688C3.11617 10.3525 3.45412 11.1538 5.04983 11.1538H15.2647L15.746 10.673C16.8744 9.65344 16.5198 8.84611 14.9241 8.84611Z"
					fill="#01824C"
				/>
			</svg>
		),
		'presto-player/presto-player.php': () => (
			<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M12.1157 9.92983L17.8401 6.60034V13.2593L12.1157 9.92983Z" fill="#3A30E5" />
				<path d="M12.1157 3.32971L17.8401 6.65922L12.1157 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 3.32971V9.93029L6.39111 6.6008L12.1155 3.32971Z" fill="#4067EE" />
				<path d="M12.1741 3.32948L6.44971 6.65899V0L12.1741 3.32948Z" fill="#476EF9" />
				<path d="M6.39114 6.65894V13.3179L0.666748 9.98842L6.39114 6.65894Z" fill="#624AF6" />
				<path d="M6.39114 0V6.65899L0.666748 3.32948L6.39114 0Z" fill="#4067EE" />
				<path d="M6.39114 13.2596V19.9186L0.666748 16.5891L6.39114 13.2596Z" fill="#7C3AED" />
				<path d="M12.1157 9.93005L17.8401 13.2596L12.1157 16.589V9.93005Z" fill="#4F46E5" />
				<path d="M0.666748 9.93005L6.39114 13.2596L0.666748 16.589V9.93005Z" fill="#814AF7" />
				<path d="M0.666748 3.32971L6.39114 6.65922L0.666748 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 9.93005V16.589L6.39111 13.2596L12.1155 9.93005Z" fill="#624AF6" />
				<path d="M12.1157 9.92983L17.8401 6.60034V13.2593L12.1157 9.92983Z" fill="#3A30E5" />
				<path d="M12.1157 3.32971L17.8401 6.65922L12.1157 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 3.32971V9.93029L6.39111 6.6008L12.1155 3.32971Z" fill="#4067EE" />
				<path d="M12.1741 3.32948L6.44971 6.65899V0L12.1741 3.32948Z" fill="#476EF9" />
				<path d="M6.39114 6.65894V13.3179L0.666748 9.98842L6.39114 6.65894Z" fill="#624AF6" />
				<path d="M6.39114 0V6.65899L0.666748 3.32948L6.39114 0Z" fill="#4067EE" />
				<path d="M6.39114 13.2596V19.9186L0.666748 16.5891L6.39114 13.2596Z" fill="#7C3AED" />
				<path d="M12.1157 9.93005L17.8401 13.2596L12.1157 16.589V9.93005Z" fill="#4F46E5" />
				<path d="M0.666748 9.93005L6.39114 13.2596L0.666748 16.589V9.93005Z" fill="#814AF7" />
				<path d="M0.666748 3.32971L6.39114 6.65922L0.666748 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 9.93005V16.589L6.39111 13.2596L12.1155 9.93005Z" fill="#624AF6" />
				<path d="M12.1157 9.92983L17.8401 6.60034V13.2593L12.1157 9.92983Z" fill="#3A30E5" />
				<path d="M12.1157 3.32971L17.8401 6.65922L12.1157 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 3.32971V9.93029L6.39111 6.6008L12.1155 3.32971Z" fill="#4067EE" />
				<path d="M12.1741 3.32948L6.44971 6.65899V0L12.1741 3.32948Z" fill="#476EF9" />
				<path d="M6.39114 6.65894V13.3179L0.666748 9.98842L6.39114 6.65894Z" fill="#624AF6" />
				<path d="M6.39114 0V6.65899L0.666748 3.32948L6.39114 0Z" fill="#4067EE" />
				<path d="M6.39114 13.2596V19.9186L0.666748 16.5891L6.39114 13.2596Z" fill="#7C3AED" />
				<path d="M12.1157 9.93005L17.8401 13.2596L12.1157 16.589V9.93005Z" fill="#4F46E5" />
				<path d="M0.666748 9.93005L6.39114 13.2596L0.666748 16.589V9.93005Z" fill="#814AF7" />
				<path d="M0.666748 3.32971L6.39114 6.65922L0.666748 9.9887V3.32971Z" fill="#3058E5" />
				<path d="M12.1155 9.93005V16.589L6.39111 13.2596L12.1155 9.93005Z" fill="#624AF6" />{ ' ' }
			</svg>
		),
	};

	function convertToPluginsArray( data ) {
		return Object.keys( data ).map( ( key ) => {
			const icon = iconMapping[ key ];

			return {
				path: key,
				...data[ key ],
				icon,
			};
		} );
	}

	return (
		<div className="rounded-lg bg-white w-full border border-solid border-border-subtle">
			<div className="flex items-center justify-between p-4" style={ { paddingBottom: '0' } }>
				<p className="m-0 text-sm font-semibold text-text-primary">
					{ __( 'Extend Your Website', 'ultimate-addons-for-gutenberg' ) }
				</p>
				<div className="flex items-center gap-x-2 mr-7"></div>
			</div>
			<div className="flex flex-col rounded-lg p-4">
				{ plugins.length <= 0 ? (
					<Container
						align="stretch"
						className="gap-1 p-1 grid grid-cols-1 md:grid-cols-2"
						containerType="grid"
						justify="start"
					>
						{ [ ...Array( 2 ) ].map( ( _, index ) => (
							<Container.Item
								key={ index }
								alignSelf="auto"
								style={ { height: '150px' } }
								className="text-wrap rounded-md shadow-container-item bg-white p-4"
							>
								<div className="flex flex-col gap-6" style={ { marginTop: '40px' } }>
									<Skeleton className="w-12 h-2 rounded-md" />
									<Skeleton className="w-16 h-2 rounded-md" />
									<Skeleton className="w-12 h-2 rounded-md" />
								</div>
							</Container.Item>
						) ) }
					</Container>
				) : (
					<Container
						align="stretch"
						className="gap-1 p-1 grid grid-cols-1 md:grid-cols-2 custom:grid-cols-1 bg-field-primary-background rounded-lg"
						containerType="grid"
						justify="start"
					>
						{ plugins?.slice( 0, 4 ).map( ( plugin ) => (
							<Container.Item
								key={ plugin.slug }
								alignSelf="auto"
								className="text-wrap rounded-md shadow-container-item bg-white p-4"
							>
								<ExtendWebsiteItem plugin={ plugin } />
							</Container.Item>
						) ) }
					</Container>
				) }
			</div>
		</div>
	);
};

export default ExtendYourWebsite;
