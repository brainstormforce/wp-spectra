!function(b){window.UAGBForms={init(s,e){const a=b(e),t=a.find(".uagb-forms-main-form"),c=t.find(".uagb-forms-phone-input");c.on("keypress",function(e){e=e.which||e.keyCode;return 45===e||!(31<e&&(e<48||57<e))});const n=t.find(".uagb-forms-toggle-input");n.on("change",function(){this.checked?b(this).val(b(this).attr("data-truestate")):b(this).val(b(this).attr("data-falsestate"))});const r=b(".uagb-forms-checkbox-wrap :checkbox[required]");if(r.on("change",function(){const e=r.filter('[name="'+b(this).attr("name")+'"]');var a=e.is(":checked");e.each(function(){this.setCustomValidity("")}),e.prop("required",!a)}),r.trigger("change"),!0===s.reCaptchaEnable&&"v2"===s.reCaptchaType&&s.reCaptchaSiteKeyV2)b("head").append(' <script src="https://www.google.com/recaptcha/api.js"><\/script>');else if(!0===s.reCaptchaEnable&&"v3"===s.reCaptchaType&&s.reCaptchaSiteKeyV3){if(s.hidereCaptchaBatch){if(void 0===document.getElementsByClassName("grecaptcha-badge")[0])return;const m=document.getElementsByClassName("grecaptcha-badge")[0];m.style.visibility="hidden"}const l=document.createElement("script");l.type="text/javascript",l.src="https://www.google.com/recaptcha/api.js?render="+s.reCaptchaSiteKeyV3,b("head").append(l)}const i=document.getElementsByClassName("uagb-block-"+s.block_id);const o=i[0].children[0].children;for(let e=0;e<o.length;e++){if(o[e].classList.contains("uag-col-2")&&o[e+1].classList.contains("uag-col-2")){const p=document.createElement("div");p.className="uag-col-2-wrap uag-col-wrap-"+e,o[e+1].after(p);const u=i[0].getElementsByClassName("uag-col-wrap-"+e);u[0].appendChild(o[e]),u[0].appendChild(o[e])}if(o[e].classList.contains("uag-col-3")&&o[e+1].classList.contains("uag-col-3")&&o[e+2].classList.contains("uag-col-3")){const d=document.createElement("div");d.className="uag-col-3-wrap uag-col-wrap-"+e,o[e+2].after(d);const h=i[0].getElementsByClassName("uag-col-wrap-"+e);h[0].appendChild(o[e]),h[0].appendChild(o[e]),h[0].appendChild(o[e])}if(o[e].classList.contains("uag-col-4")&&o[e+1].classList.contains("uag-col-4")&&o[e+2].classList.contains("uag-col-4")&&o[e+3].classList.contains("uag-col-4")){const g=document.createElement("div");g.className="uag-col-4-wrap uag-col-wrap-"+e,o[e+3].after(g);const f=i[0].getElementsByClassName("uag-col-wrap-"+e);f[0].appendChild(o[e]),f[0].appendChild(o[e]),f[0].appendChild(o[e]),f[0].appendChild(o[e])}}t.on("submit",function(a){a.preventDefault();const t=b(this);!0===s.reCaptchaEnable&&"v3"===s.reCaptchaType&&s.reCaptchaSiteKeyV3?grecaptcha.ready(function(){grecaptcha.execute(s.reCaptchaSiteKeyV3,{action:"submit"}).then(function(e){e&&(document.getElementById("g-recaptcha-response").value=e,window.UAGBForms._formSubmit(a,t,s))})}):window.UAGBForms._formSubmit(a,t,s)})},_formSubmit(e,a,t){e.preventDefault();let s,c;if(!0===t.reCaptchaEnable&&"v2"===t.reCaptchaType&&t.reCaptchaSiteKeyV2){if(c=a[0].getElementsByClassName("uagb-forms-recaptcha")[0].value,!c)return b(".uagb-form-reacaptcha-error-"+t.block_id).html('<p style="color:red !important" class="error-captcha">'+t.captchaMessage+"</p>"),!1;b(".uagb-form-reacaptcha-error-"+t.block_id).html(""),s={secret:t.reCaptchaSecretKeyV2,sitekey:t.reCaptchaSiteKeyV2}}!0===t.reCaptchaEnable&&"v3"===t.reCaptchaType&&t.reCaptchaSiteKeyV3&&(s={secret:t.reCaptchaSecretKeyV3,sitekey:t.reCaptchaSiteKeyV3},c=document.getElementById("g-recaptcha-response").value);const n=b(a).serializeArray(),r={};for(let a=0;a<n.length;a++){var i=n[a].name;if(n[a].name.endsWith("[]")){let e=n[a].name;e=e.substring(0,e.length-2),e in r||(r[e]=[]),r[e].push(n[a].value)}else if(n[a].value.startsWith("+")){let e=n[a].name;e=e.substring(0,e.length-2),e in r||(r[e]=[]),r[b("#"+e).html()].push(n[a].value)}else r[b("#"+i).html()]=n[a].value}e={to:t.afterSubmitToEmail,cc:t.afterSubmitCcEmail,bcc:t.afterSubmitBccEmail,subject:t.afterSubmitEmailSubject};b('<span class="components-spinner"></span>').appendTo(a.find(".uagb-forms-main-submit-button-wrap")),b.ajax({type:"POST",url:uagb_forms_data.ajax_url,data:{action:"uagb_process_forms",nonce:uagb_forms_data.uagb_forms_ajax_nonce,form_data:r,sendAfterSubmitEmail:t.sendAfterSubmitEmail,after_submit_data:e,uagab_captcha_keys:s,captcha_response:c},success(e){200===e.data?("message"===t.confirmationType&&(b('[name="uagb-form-'+t.block_id+'"]').hide(),b(".uagb-forms-success-message-"+t.block_id).removeClass("uagb-forms-submit-message-hide").addClass("uagb-forms-success-message")),"url"===t.confirmationType&&window.location.replace(t.confirmationUrl)):400===e.data&&"message"===t.confirmationType&&(b('[name="uagb-form-'+t.block_id+'"]').hide(),b(".uagb-forms-failed-message-"+t.block_id).removeClass("uagb-forms-submit-message-hide").addClass("uagb-forms-failed-message"))}})}}}(jQuery);